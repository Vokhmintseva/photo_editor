(this.webpackJsonpphoto_editor=this.webpackJsonpphoto_editor||[]).push([[0],[,,,,,function(e,t,n){},,function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},,,function(e,t,n){e.exports=n(36)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){},,,,function(e,t,n){"use strict";n.r(t);var o,r=n(0),a=n.n(r),c=n(6),i=n.n(c),l=(n(21),n(22),n(2));!function(e){e[e.triangle=0]="triangle",e[e.rectangle=1]="rectangle",e[e.circle=2]="circle"}(o||(o={}));n(23),n(24);var u=function(e){var t="".concat(e.label,"-").concat(Math.random());return a.a.createElement("div",{className:"filterBtn__selectWrapper"},a.a.createElement("select",{id:t,value:e.value,onChange:e.onChange,className:"filterBtn__select"},e.options.map((function(e,t){return a.a.createElement("option",{value:e.value,key:e.value+t},e.text)}))))};function s(e){return{type:"ADD_FIGURE",payload:e}}function d(e){return{type:"ADD_IMAGE",payload:e}}function f(e){return{type:"RESIZE_EDITOR_OBJ",payload:e}}function h(e){return{type:"ROLL",payload:e}}var b=n(3),m=[],g=[];function p(){var e=m.pop();return g.push(e),e}function v(){return g.pop()}function O(e){m.push(e)}n(7);var y=Object(b.b)((function(e){return{editor:e.editorReducer.editor}}),(function(e){return{onAddImage:function(t){return e(d(t))}}}))((function(e){var t=Object(r.useContext)(Ce);return a.a.createElement("div",{className:"openBtn"},a.a.createElement("label",{htmlFor:"myImage",className:"openBtn__label",title:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"}),a.a.createElement("input",{type:"file",id:"myImage",name:"myImage",onChange:function(n){var o=n.target.files[0],r=new Image,a=[];a.push(o);var c=window.URL.createObjectURL(new Blob(a,{type:"originalFile.type"}));r.src=c,n.target.value="";var i=t.getContext("2d");r.onload=function(){var n=r.width,o=r.height;n>e.editor.canvas.width||o>e.editor.canvas.height?window.confirm("\u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c\u0430\u044f \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f \u0431\u043e\u043b\u044c\u0448\u0435 \u043f\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0443 \u0445\u043e\u043b\u0441\u0442\u0430. \u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u043f\u043e\u043b\u043e\u0442\u043d\u043e \u0434\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438?")&&(t.width=n,t.height=o,i.drawImage(r,0,0)):i.drawImage(r,0,0);var a=i.getImageData(0,0,t.width,t.height);console.log("openButton addImage dispatch"),O(e.editor),e.onAddImage({newImage:a})}},className:"openBtn__input"}))}));var j=function(e){var t=Object(r.useContext)(Ce),n=Object(r.useState)("jpeg"),o=Object(l.a)(n,2),c=o[0],i=o[1];return a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n=t.toDataURL("image/".concat(c)),o=document.createElement("a");o.href=n,o.download="my-image.".concat(c),o.click()},className:"saveBtn__form"},a.a.createElement("div",{className:"saveBtn__wrapper"},a.a.createElement("div",null,a.a.createElement("label",{className:"saveBtn__label"},a.a.createElement("select",{className:"saveBtn__select",onChange:function(e){i(e.target.value)}},a.a.createElement("option",{value:"jpeg"},"jpeg"),a.a.createElement("option",{value:"png"},"png")))),a.a.createElement("div",null,a.a.createElement("button",{type:"submit",value:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",className:"saveBtn",title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}))))};var E=Object(b.b)(null,(function(e){return{onRollBack:function(t){return e(h(t))}}}))((function(e){return a.a.createElement("button",{onClick:function(){if(m.length){var t=p();console.log("editor from undoStack",t),e.onRollBack({newEditor:t})}},className:"undoBtn",title:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})}));var w,x=Object(b.b)(null,(function(e){return{onRollOn:function(t){return e(h(t))}}}))((function(e){return a.a.createElement("button",{onClick:function(){if(g.length){var t=v();e.onRollOn({newEditor:t})}},className:"redoBtn",title:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c"})})),S=n(1);function C(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,n=e*t*4,o=new Uint8Array(n),r=0;r<n;r+=4)o[r]=255,o[r+1]=255,o[r+2]=255,o[r+3]=255;return new ImageData(new Uint8ClampedArray(o.buffer),e,t)}function R(e,t){return Object(S.a)(Object(S.a)({},e),{},{canvas:C(t.width,t.height),selectedObject:null})}function A(e,t){return e.selectedObject?Object(S.a)(Object(S.a)({},e),{},{selectedObject:Object(S.a)(Object(S.a)({},e.selectedObject),{},{position:t.newPoint,w:t.newWidth,h:t.newHeight})}):e}function T(e){var t=I(e),n=e.canvas.data.slice();if(M(e.selectedObject))for(var o=0;o<t.length;o++)n[t[o]]=e.selectedObject.pixelArray.data[o];return new ImageData(n,e.canvas.width,e.canvas.height)}function B(e,t){return Object(S.a)(Object(S.a)({},e),{},{canvas:T(e),selectedObject:null})}function _(e,t){return Object(S.a)(Object(S.a)({},e),{},{canvas:t.newImage})}function I(e){var t=[];if(null!==e.selectedObject)for(var n=e.selectedObject.position.x,o=e.selectedObject.position.y,r=o+e.selectedObject.h,a=e.selectedObject.w,c=0,i=o;i<r;i++)for(var l=W(e,{x:n,y:i}),u=l;u<l+4*a;u++)t[c]=u,c++;return t}function N(e,t){return Object(S.a)(Object(S.a)({},e),{},{selectedObject:{type:"selectedArea",pixelArray:z(e,t.startPoint,t.endPoint),position:{x:Math.min(t.startPoint.x,t.endPoint.x),y:Math.min(t.startPoint.y,t.endPoint.y)},w:Math.abs(t.startPoint.x-t.endPoint.x),h:Math.abs(t.startPoint.y-t.endPoint.y)}})}function L(e,t){return Object(S.a)({},t.newEditor)}function k(e,t){return Object(S.a)(Object(S.a)({},e),{},{selectedObject:{type:"text",position:{x:Math.min(t.startPoint.x,t.endPoint.x),y:Math.min(t.startPoint.y,t.endPoint.y)},w:Math.abs(t.startPoint.x-t.endPoint.x),h:Math.abs(t.startPoint.y-t.endPoint.y),text:"",fontFamily:"Roboto",fontSize:20,color:"#000000",fontWeight:400,fontStyle:"normal",textDecoration:"none",backgroundColor:"rgba(255, 255, 255, 0.8)"}})}function D(e,t){return Object(S.a)(Object(S.a)({},e),{},{selectedObject:null})}function P(e){return"text"==e.type}function F(e){return e.type==o.triangle||e.type==o.rectangle||e.type==o.circle}function M(e){return"selectedArea"==e.type}function X(e,t){return M(e.selectedObject)?Object(S.a)(Object(S.a)({},e),{},{selectedObject:Object(S.a)(Object(S.a)({},e.selectedObject),{},{position:t.where})}):e}function Y(e,t){return P(e.selectedObject)?Object(S.a)(Object(S.a)({},e),{},{selectedObject:Object(S.a)(Object(S.a)({},e.selectedObject),{},{position:t.where})}):e}function W(e,t){var n=t.x;return 4*t.y*e.canvas.width+4*n}function z(e,t,n){for(var o=n.x-t.x,r=n.y-t.y,a=new Uint8Array(o*r*4),c=0,i=t.y;i<n.y;i++)for(var l=t.x;l<n.x;l++)for(var u=W(e,{x:l,y:i}),s=u;s<u+4;s++)a[c]=e.canvas.data[s],c++;return new ImageData(new Uint8ClampedArray(a.buffer),o,r)}function U(e,t){for(var n=e.canvas.data.slice(),o=0;o<t.length;o+=4)n[t[o]+3]=0;return new ImageData(n,e.canvas.width,e.canvas.height)}function H(e,t){for(var n=e.canvas.data.slice(),o=0;o<t.length;o++)n[t[o]]=255;return new ImageData(n,e.canvas.width,e.canvas.height)}function G(e,t){var n=C(e.canvas.width,e.canvas.height).data;if(M(e.selectedObject))for(var o=e.selectedObject.pixelArray.data,r=0;r<t.length;r++)n[t[r]]=o[r];return new ImageData(n,e.canvas.width,e.canvas.height)}function J(e,t){return Object(S.a)(Object(S.a)({},e),{},{canvas:U(e,I(e)),selectedObject:null})}function V(e,t){return Object(S.a)(Object(S.a)({},e),{},{canvas:H(e,I(e))})}function K(e,t){return Object(S.a)(Object(S.a)({},e),{},{canvas:G(e,I(e)),selectedObject:null})}function q(e,t){var n=e.canvas.data.slice();if("grey"===t)for(var o=0;o<n.length;o+=4){var r=(n[o]+n[o+1]+n[o+2])/3;n[o]=r,n[o+1]=r,n[o+2]=r}else for(var a=0;a<n.length;a+=4)n[a]="red"===t?n[a]:0,n[a+1]="green"===t?n[a+1]:0,n[a+2]="blue"===t?n[a+2]:0;return new ImageData(n,e.canvas.width,e.canvas.height)}function Z(e,t){return Object(S.a)(Object(S.a)({},e),{},{canvas:q(e,t.filterColor)})}function $(e,t){return Object(S.a)(Object(S.a)({},e),{},{selectedObject:{position:{x:e.canvas.width/2-50,y:e.canvas.height/2-50},w:100,h:100,type:o.circle,backgroundColor:"#ffffff00",borderColor:"#FF0000"}})}function Q(e,t){return F(e.selectedObject)?Object(S.a)(Object(S.a)({},e),{},{selectedObject:Object(S.a)(Object(S.a)({},e.selectedObject),{},{backgroundColor:t.newColor})}):e}function ee(e,t){return F(e.selectedObject)?Object(S.a)(Object(S.a)({},e),{},{selectedObject:Object(S.a)(Object(S.a)({},e.selectedObject),{},{borderColor:t.newColor})}):e}!function(e){e[e.HandleSelectedObject=0]="HandleSelectedObject",e[e.SelectArea=1]="SelectArea",e[e.SelectTextObj=2]="SelectTextObj",e[e.BrowseRemoteGallery=3]="BrowseRemoteGallery",e[e.TakePhoto=4]="TakePhoto"}(w||(w={}));var te=Object(b.b)((function(e){return{editor:e.editorReducer.editor}}),(function(e){return{onDeselectArea:function(){return e({type:"DESELECT_AREA",payload:{}})},onApplyFilter:function(t){return e(function(e){return{type:"APPLY_FILTER",payload:e}}(t))},onCut:function(){return e({type:"CUT",payload:{}})},onCrop:function(){return e({type:"CROP",payload:{}})},onCreateCanvas:function(t){return e(function(e){return{type:"CREATE_CANVAS",payload:e}}(t))},onAddFigure:function(t){return e(s(t))}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null),o=Object(r.useState)("grey"),c=Object(l.a)(o,2),i=c[0],s=c[1],d=function(t){var n=t.target.id;e.onSetFigure(n),e.onSetIntention(w.HandleSelectedObject),console.log("dispatch EditorComponent addFigure"),O(e.editor),e.onAddFigure({figureType:n})},f=a.a.createElement(u,{label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0438\u043b\u044c\u0442\u0440",value:i,onChange:function(e){s(e.target.value)},options:[{text:"\u0441\u0435\u0440\u044b\u0439",value:"grey"},{text:"\u043a\u0440\u0430\u0441\u043d\u044b\u0439",value:"red"},{text:"\u0437\u0435\u043b\u0435\u043d\u044b\u0439",value:"green"},{text:"\u0441\u0438\u043d\u0438\u0439",value:"blue"}]});return Object(r.useLayoutEffect)((function(){t.current.style.width=e.editor.canvas.width+"px"})),a.a.createElement("div",{className:"toolbar",ref:t},a.a.createElement(y,null),a.a.createElement("button",{onClick:function(t){e.onSetIntention(w.BrowseRemoteGallery),e.onDeselectArea()},title:"\u041f\u043e\u0438\u0441\u043a \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439",className:"remoteImgBtn"}),a.a.createElement(j,null),a.a.createElement(E,null),a.a.createElement(x,null),a.a.createElement("button",{onClick:function(){window.confirm("\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0445\u043e\u043b\u0441\u0442 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d. \u0412\u044b \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u0442\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0445\u043e\u043b\u0441\u0442\u0430?")&&(console.log("dispatch Toolbar createCanvas"),O(e.editor),e.onCreateCanvas({width:800,height:600}),e.onSetIntention(w.SelectArea))},title:"\u041d\u043e\u0432\u044b\u0439 \u0445\u043e\u043b\u0441\u0442",className:"newCanvas_btn"}),f,a.a.createElement("button",{onClick:function(t){console.log("dispatch Toolbar onApplyFilter"),O(e.editor),e.onApplyFilter({filterColor:i})},title:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440",className:"filterBtn"}),a.a.createElement("button",{onClick:function(t){return e.onSetIntention(w.TakePhoto)},className:"webCamBtn",title:"\u0421\u043d\u0438\u043c\u043e\u043a \u0441 \u0432\u0435\u0431-\u043a\u0430\u043c\u0435\u0440\u044b"}),a.a.createElement("button",{ref:n,title:"\u0422\u0435\u043a\u0441\u0442",onClick:function(t){return e.onSetIntention(w.SelectTextObj)},className:"textBtn"}),!(e.editor.selectedObject&&F(e.editor.selectedObject))&&a.a.createElement("div",{className:"ShapeBar"},a.a.createElement("button",{className:"circleBtn",title:"\u041a\u0440\u0443\u0433",id:"circle",onClick:d}),a.a.createElement("button",{className:"rectangleBtn",title:"\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a",id:"rectangle",onClick:d}),a.a.createElement("button",{className:"triangleBtn",title:"\u0422\u0440\u0435\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a",id:"triangle",onClick:d})),e.editor.selectedObject&&M(e.editor.selectedObject)&&a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){console.log("dispatch Toolbar cut"),O(e.editor),e.onCut()},className:"cutBtn"}),a.a.createElement("button",{onClick:function(){console.log("dispatch Toolbar crop"),O(e.editor),e.onCrop()},className:"cropBtn"})))}));var ne=Object(b.b)((function(e){return{editor:e.editorReducer.editor}}),(function(e){return{onAddImage:function(t){return e(d(t))}}}))((function(e){var t,n=Object(r.useRef)(null),o=Object(r.useRef)(null);function c(){t.srcObject.getVideoTracks()[0].stop(),e.onSetIntention(w.SelectArea)}var i=Object(r.useContext)(Ce);return Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then((function(e){(t=document.querySelector("#video"))&&(t.srcObject=e,t.onloadedmetadata=function(){t.play()})})).catch((function(e){console.log("!!!!!"+e)})),setTimeout((function(){var e=n.current,t=o.current;e.style.display="block",t.style.display="block"}),2500)})),a.a.createElement("div",{style:{position:"absolute"}},a.a.createElement("video",{id:"video",controls:!0,autoPlay:!0}),a.a.createElement("button",{onClick:c,style:{display:"none"},ref:n},"cancel"),a.a.createElement("button",{onClick:function(){if(i){var n=i.getContext("2d");n.drawImage(t,0,0);var o=n.getImageData(0,0,i.width,i.height);console.log("dispatch Video addImage"),O(e.editor),e.onAddImage({newImage:o}),c()}},style:{display:"none"},ref:o},"take photo"))}));n(5);for(var oe=Object(b.b)((function(e){return{editor:e.editorReducer.editor}}),(function(e){return{onDropSelection:function(t){return e(function(e){return{type:"DROP_SA",payload:e}}(t))},onJoinSelectionWithCanvas:function(){return e({type:"JOIN_SA_WITH_CANVAS",payload:{}})}}}))((function(e){var t=Object(r.useContext)(Ce).getBoundingClientRect(),n=Object(r.useState)(!1),o=Object(l.a)(n,2),c=o[0],i=o[1],u=Object(r.useState)({x:0,y:0}),s=Object(l.a)(u,2),d=s[0],f=s[1],h=Object(r.useState)((function(){return function(e,t){return{x:e.editor.selectedObject.position.x,y:t.top+e.editor.selectedObject.position.y}}(e,t)})),b=Object(l.a)(h,2),m=b[0],g=b[1],p=Object(r.useRef)(null);function v(e){console.log("SA in onMouseDownSAHandler function"),f({x:e.clientX-m.x,y:e.clientY-m.y}),i(!0),e.preventDefault()}var O=function(e,n){var o=p.current;return e<t.left&&(e=t.left),e+o.width>t.right&&(e=t.right-o.width),n<t.top&&(n=t.top),n+o.height>t.bottom&&(n=Math.max(t.bottom-o.height,t.top)),{left:e,top:n}},y=function(e){if(c){var t=O(e.clientX-d.x,e.clientY-d.y);g({x:t.left,y:t.top}),e.preventDefault()}},j=function(n){if(c){console.log("SA in onMouseUpSAHandler function");var o=O(n.clientX-d.x,n.clientY-d.y);g({x:o.left,y:o.top}),console.log("dispatch SelectedArea onDropSelection"),e.onDropSelection({where:{x:o.left,y:o.top-t.top}}),i(!1)}};return Object(r.useEffect)((function(){var e=p.current;return e.addEventListener("mousedown",v),document.addEventListener("mousemove",y),document.addEventListener("mouseup",j),function(){e.removeEventListener("mousedown",v),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",j)}})),Object(r.useEffect)((function(){var t=p.current,n=t.getContext("2d");if(t.style.top=m.y+"px",t.style.left=m.x+"px",t.setAttribute("width",e.editor.selectedObject.w.toString()),t.setAttribute("height",e.editor.selectedObject.h.toString()),M(e.editor.selectedObject)){var o=e.editor.selectedObject.pixelArray;n.putImageData(o,-1,-1,0,0,e.editor.selectedObject.w,e.editor.selectedObject.h)}}),[]),a.a.createElement("canvas",{ref:p,className:"selCanvas",style:{top:"".concat(m.y,"px"),left:"".concat(m.x,"px")}})})),re=(n(12),function(e){var t="".concat(e.label,"-").concat(Math.random());return a.a.createElement("div",{className:""},a.a.createElement("label",{htmlFor:t,className:"textbar__fontLabel"},e.label),a.a.createElement("select",{id:t,value:e.value,onChange:e.onChange,className:"textbar__fontSelect"},e.options.map((function(e,t){return a.a.createElement("option",{value:e,key:t,style:{fontFamily:"".concat(e)}},e)}))))}),ae=[],ce=6;ce<100;ce++)ae[ce]=ce;var ie,le=function(e){var t="".concat(e.label,"-").concat(Math.random());return a.a.createElement("div",{className:""},a.a.createElement("label",{htmlFor:t,className:"textbar__fontLabel"},e.label),a.a.createElement("select",{id:t,value:e.value,onChange:e.onChange,className:"textbar__fontSelect"},ae.map((function(e,t){return a.a.createElement("option",{value:e,key:t},e)}))))};!function(e){e[e.LeftTop=0]="LeftTop",e[e.RightTop=1]="RightTop",e[e.LeftBottom=2]="LeftBottom",e[e.RightBottom=3]="RightBottom"}(ie||(ie={}));var ue=ie,se=function(e,t,n){return e<n.left&&(e=n.left),e>n.right-3-2&&(e=n.right-3-2),t<n.top&&(t=n.top),t>n.bottom-3-2&&(t=n.bottom-3-2),{x:e,y:t}};var de=function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)({x:0,y:0}),o=Object(r.useRef)(""),c=Object(r.useContext)(Ce),i=Object(r.useRef)(!1);function l(e){i.current=!0,e.preventDefault()}var u=function(t){if(i.current){var n=c.getBoundingClientRect(),o={leftTop:{x:e.pos.x,y:e.pos.y},leftBottom:{x:e.pos.x,y:e.pos.y+e.pos.height},rightTop:{x:e.pos.x+e.pos.width,y:e.pos.y},rightBottom:{x:e.pos.x+e.pos.width,y:e.pos.y+e.pos.height}},r=function(e,t,n,o,r){var a,c=0,i=0,l=0,u=0;switch(r){case ue.LeftTop:e>n.rightTop.x&&(e=n.rightTop.x),t>n.leftBottom.y&&(t=n.rightTop.y),c=(a=se(e,t,o)).x,i=a.y,l=n.rightTop.x-c,u=n.leftBottom.y-i;break;case ue.LeftBottom:e>n.rightBottom.x&&(e=n.rightBottom.x),t<n.leftTop.y&&(t=n.leftTop.y),c=(a=se(e,t,o)).x,i=n.leftTop.y,l=n.rightBottom.x-c,u=a.y-i;break;case ue.RightTop:e<n.leftTop.x&&(e=n.leftTop.x),t>n.rightBottom.y&&(t=n.rightBottom.y),a=se(e,t,o),c=n.leftTop.x,i=a.y,l=a.x-c,u=n.rightBottom.y-i;break;case ue.RightBottom:e<n.leftTop.x&&(e=n.leftTop.x),t<n.leftTop.y&&(t=n.leftTop.y),a=se(e,t,o),c=n.leftTop.x,i=n.leftTop.y,l=a.x-c,u=a.y-i}return{x:c,y:i,width:l,height:u}}(t.clientX,t.clientY,Object(S.a)({},o),n,e.type),a=r.x,l=r.y,u=r.width,s=r.height;e.changeSize(a,l,u,s),t.preventDefault()}},s=function(e){i.current&&(i.current=!1,e.preventDefault())};return Object(r.useEffect)((function(){switch(e.type){case ue.LeftTop:n.current={x:-3,y:-3},o.current="se-resize";break;case ue.LeftBottom:n.current={x:-3,y:e.pos.height},o.current="ne-resize";break;case ue.RightTop:n.current={x:e.pos.width,y:-3},o.current="sw-resize";break;case ue.RightBottom:n.current={x:e.pos.width,y:e.pos.height},o.current="nw-resize"}if(e.showNewFigure)switch(e.type){case ue.LeftTop:n.current={x:-3,y:-3};break;case ue.LeftBottom:n.current={x:-3,y:100};break;case ue.RightTop:n.current={x:100,y:-3};break;case ue.RightBottom:n.current={x:100,y:100}}var r=t.current;return r.addEventListener("mousedown",l),document.addEventListener("mousemove",u),document.addEventListener("mouseup",s),function(){r.removeEventListener("mousedown",l),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",s)}})),a.a.createElement("div",{ref:t,className:"slider",style:{left:"".concat(e.pos.x+n.current.x,"px"),top:"".concat(e.pos.y+n.current.y,"px"),cursor:"".concat(o.current)}})},fe=["Roboto","Open Sans","Montserrat","Roboto Condensed","Source Sans Pro","Oswald","Merriweather","Noto Sans","Yanone Kaffeesatz","Caveat"];var he=function(e,t,n,o){return e<o.left&&(e=o.left),e+n.width>o.right&&(e=o.right-n.width),t<o.top&&(t=o.top),t+n.height>o.bottom&&(t=Math.max(o.bottom-n.height,o.top)),{left:e,top:t}};var be=Object(b.b)((function(e){return{editor:e.editorReducer.editor}}),(function(e){return{onResizeEditorObj:function(t){return e(f(t))},onDropTextObj:function(t){return e(function(e){return{type:"DROP_TEXT_OBJ",payload:e}}(t))},onAddImage:function(t){return e(d(t))},onDeselectArea:function(){return e({type:"DESELECT_AREA",payload:{}})}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useContext)(Ce),o=Object(r.useState)(!1),c=Object(l.a)(o,2),i=c[0],u=c[1],s=Object(r.useState)({x:0,y:0}),d=Object(l.a)(s,2),f=d[0],h=d[1],b=Object(r.useState)((function(){return function(e){var t=n.getBoundingClientRect();return{x:e.selectedObject.position.x,y:t.top+e.selectedObject.position.y,width:e.selectedObject.w,height:e.selectedObject.h}}(e.editor)})),m=Object(l.a)(b,2),g=m[0],p=m[1],v=Object(r.useState)(""),y=Object(l.a)(v,2),j=y[0],E=y[1],x=Object(r.useState)((function(){return P((t=e.editor).selectedObject)?t.selectedObject.color:"#000000";var t})),S=Object(l.a)(x,2),C=S[0],R=S[1],A=Object(r.useState)((function(){return P((t=e.editor).selectedObject)?t.selectedObject.fontWeight:400;var t})),T=Object(l.a)(A,2),B=T[0],_=T[1],I=Object(r.useState)((function(){return P((t=e.editor).selectedObject)?t.selectedObject.fontStyle:"normal";var t})),N=Object(l.a)(I,2),L=N[0],k=N[1],D=Object(r.useState)((function(){return P((t=e.editor).selectedObject)?t.selectedObject.fontFamily:"Times New Roman";var t})),F=Object(l.a)(D,2),M=F[0],X=F[1],Y=Object(r.useState)((function(){return P((t=e.editor).selectedObject)?t.selectedObject.fontSize:20;var t})),W=Object(l.a)(Y,2),z=W[0],U=W[1],H=Object(r.useState)((function(){return P((t=e.editor).selectedObject)?t.selectedObject.backgroundColor:"rgba(255, 255, 255, 0.8)";var t})),G=Object(l.a)(H,2),J=G[0],V=(G[1],Object(r.useState)(!1)),K=Object(l.a)(V,2),q=K[0],Z=(K[1],Object(r.useRef)(null));var $=a.a.createElement(re,{label:"\u0428\u0440\u0438\u0444\u0442",value:M,onChange:function(e){X(e.target.value)},options:fe}),Q=a.a.createElement(le,{label:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430",value:z,onChange:function(e){U(Number(e.target.value))}});function ee(t,o,r,a){var c=n.getBoundingClientRect();p({x:t,y:o,width:r,height:a}),console.log("dispatch TextObject resizeEditorObj"),O(e.editor),e.onResizeEditorObj({newPoint:{x:t,y:o-c.top},newWidth:r,newHeight:a})}function te(e){e.defaultPrevented||(console.log("TEXT in onMouseDownTextObjHandler function"),h({x:e.clientX-g.x,y:e.clientY-g.y}),u(!0))}var ne=function(e){if(!e.defaultPrevented&&i){var t=Z.current.getBoundingClientRect(),o=n.getBoundingClientRect(),r=he(e.clientX-f.x,e.clientY-f.y,t,o);p({x:r.left,y:r.top,width:g.width,height:g.height})}},oe=function(t){if(!t.defaultPrevented&&i){var o=n.getBoundingClientRect(),r=Z.current.getBoundingClientRect(),a=he(t.clientX-f.x,t.clientY-f.y,r,o);p({x:a.left,y:a.top,width:g.width,height:g.height}),console.log("dispatch TextObject dropTextObj"),O(e.editor),e.onDropTextObj({where:{x:a.left,y:a.top-o.top}}),u(!1)}};return Object(r.useEffect)((function(){var e=Z.current;return e.addEventListener("mousedown",te),document.addEventListener("mousemove",ne),document.addEventListener("mouseup",oe),function(){e.removeEventListener("mousedown",te),document.removeEventListener("mousemove",ne),document.removeEventListener("mouseup",oe)}})),Object(r.useEffect)((function(){var t=n.getBoundingClientRect();p({x:e.editor.selectedObject.position.x,y:e.editor.selectedObject.position.y+t.top,width:e.editor.selectedObject.w,height:e.editor.selectedObject.h})}),[]),Object(r.useLayoutEffect)((function(){var e=n.getBoundingClientRect(),o=t.current;o.style.top=e.top+"px",o.style.left=e.width+"px"})),a.a.createElement("div",null,a.a.createElement("div",{className:"textbar",ref:t},a.a.createElement("div",{style:{margin:"5px"}},a.a.createElement("label",{className:"textbar__colorLabel"},"\u0426\u0432\u0435\u0442"),a.a.createElement("input",{type:"color",onChange:function(e){R(e.target.value)}}),a.a.createElement("button",{className:"boldFontButtton",onClick:function(e){_(400==B?700:400)},title:"\u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430"},"B"),a.a.createElement("button",{className:"italicsFontButtton",onClick:function(e){k("normal"==L?"italic":"normal")},title:"\u0421\u0442\u0438\u043b\u044c \u0442\u0435\u043a\u0441\u0442\u0430"},"I")),a.a.createElement("div",null,$),a.a.createElement("div",null,Q),a.a.createElement("div",{className:"textBar__buttons"},a.a.createElement("button",{className:"applyBtn",onClick:function(t){var o=1.2*z,r=n.getContext("2d"),a=n.getBoundingClientRect();r.fillStyle=C,r.font=B+" "+L+" "+z+"px "+M,function(e,t,n,o,r,a){for(var c=t.split(" "),i="",l=0;l<c.length;l++){if(e.measureText(c[l]).width>r){""!==i&&(c[l]=i+" "+c[l]);for(var u=c[l].split(""),s="",d=0;d<u.length;d++){var f=s+u[d];e.measureText(f).width>r&&d>0?(e.fillText(s,n,o),s=u[d],o+=a):s=f}i=s+" "}else{var h=i+c[l]+" ";e.measureText(h).width>r&&l>0?(e.fillText(i,n,o),i=c[l]+" ",o+=a):i=h}e.fillText(i,n,o)}}(r,j,g.x,g.y-a.top+z,e.editor.selectedObject.w,o);var c=r.getImageData(0,0,n.width,n.height);console.log("dispatch TextObject addImage"),O(e.editor),e.onAddImage({newImage:c}),e.onSetIntention(w.SelectArea),e.onDeselectArea()},title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u043a\u0441\u0442"}),a.a.createElement("button",{className:"abolishBtn",onClick:function(t){e.onDeselectArea(),e.onSetIntention(w.SelectArea)},title:"\u041e\u0442\u043c\u0435\u043d\u0430"}))),a.a.createElement("textarea",{ref:Z,onChange:function(e){E(e.target.value)},value:j,className:"textField",autoFocus:!0,style:{top:"".concat(g.y,"px"),left:"".concat(g.x,"px"),height:"".concat(g.height,"px"),width:"".concat(g.width,"px"),color:"".concat(C),fontStyle:"".concat(L),fontWeight:400==B?400:700,fontFamily:"".concat(M,", sans-serif"),fontSize:"".concat(z)+"px",backgroundColor:"".concat(J)}}),a.a.createElement(de,{pos:g,changeSize:ee,type:ue.LeftTop,showNewFigure:q}),a.a.createElement(de,{pos:g,changeSize:ee,type:ue.RightTop,showNewFigure:q}),a.a.createElement(de,{pos:g,changeSize:ee,type:ue.LeftBottom,showNewFigure:q}),a.a.createElement(de,{pos:g,changeSize:ee,type:ue.RightBottom,showNewFigure:q}))})),me=function(e,t,n,o){return e<o.left&&(e=o.left),e+n.width>o.right+4-2&&(e=o.right-n.width+4-2),t<o.top&&(t=o.top),t+n.height>o.bottom+4-4&&(t=Math.max(o.bottom-n.height+4-4,o.top)),{left:e,top:t}};function ge(e,t,n,o,r,a){switch(t.beginPath(),t.lineWidth=2,t.fillStyle=r,t.strokeStyle=o,e.toString()){case"circle":t.ellipse(n.width/2+a.x,n.height/2+a.y,n.width/2,n.height/2,0,0,2*Math.PI);break;case"triangle":t.moveTo(a.x,a.y+n.height),t.lineTo(a.x+n.width,a.y+n.height),t.lineTo(a.x+n.width/2,a.y);break;case"rectangle":t.moveTo(a.x,a.y+n.height),t.lineTo(a.x+n.width,a.y+n.height),t.lineTo(a.x+n.width,a.y),t.lineTo(a.x,a.y)}t.closePath(),t.stroke(),t.fill()}var pe=Object(b.b)((function(e){return{editor:e.editorReducer.editor}}),(function(e){return{onResizeEditorObj:function(t){return e(f(t))},onDropShapeObj:function(t){return e(function(e){return{type:"DROP_SHAPE_OBJ",payload:e}}(t))},onAddImage:function(t){return e(d(t))},onDeselectArea:function(){return e({type:"DESELECT_AREA",payload:{}})},onSetFigureBackgroundColor:function(t){return e(function(e){return{type:"SET_FIGURE_BACKGROUND_COLOR",payload:e}}(t))},onSetFigureBorderColor:function(t){return e(function(e){return{type:"SET_FIGURE_BORDER_COLOR",payload:e}}(t))}}}))((function(e){var t=Object(r.useContext)(Ce),n=t.getBoundingClientRect(),o=Object(r.useState)(!1),c=Object(l.a)(o,2),i=c[0],u=c[1],s=Object(r.useState)({x:0,y:0}),d=Object(l.a)(s,2),f=d[0],h=d[1],b=Object(r.useState)((function(){return function(e,t){return{x:e.selectedObject.position.x,y:e.selectedObject.position.y+t.top,width:e.selectedObject.w,height:e.selectedObject.h}}(e.editor,n)})),m=Object(l.a)(b,2),g=m[0],p=m[1],v=Object(r.useRef)(null),y=Object(r.useRef)(null);function j(n,o,r,a){var c=t.getBoundingClientRect();p({x:n,y:o,width:r,height:a}),console.log("dispatch ShapeObject ResizeEditorObj"),O(e.editor),e.onResizeEditorObj({newPoint:{x:n,y:o-c.top},newWidth:r,newHeight:a})}function E(e){e.defaultPrevented||(h({x:e.clientX-g.x,y:e.clientY-g.y}),u(!0))}var x=function(e){if(!e.defaultPrevented&&i){var n=y.current.getBoundingClientRect(),o=t.getBoundingClientRect(),r=me(e.clientX-f.x,e.clientY-f.y,n,o);p({x:r.left,y:r.top,width:g.width,height:g.height})}},C=function(n){if(!n.defaultPrevented&&i){var o=t.getBoundingClientRect(),r=y.current.getBoundingClientRect(),a=me(n.clientX-f.x,n.clientY-f.y,r,o);p({x:a.left,y:a.top,width:g.width,height:g.height}),console.log("dispatch ShapeObject dropShapeObj"),O(e.editor),e.onDropShapeObj({where:{x:a.left,y:a.top-o.top}}),u(!1)}};return Object(r.useEffect)((function(){e.showNewFigure&&(!function(){var n=t.getBoundingClientRect();p({x:e.editor.canvas.width/2-50,y:e.editor.canvas.height/2-50+n.top,width:100,height:100})}(),e.onShowNewFigure(!1));var n=y.current,o=n.getContext("2d");return n.setAttribute("width",e.editor.selectedObject.w.toString()),n.setAttribute("height",e.editor.selectedObject.h.toString()),F(e.editor.selectedObject)&&ge(e.figure,o,Object(S.a)({},g),e.editor.selectedObject.borderColor,e.editor.selectedObject.backgroundColor,{x:0,y:0}),n.addEventListener("mousedown",E),document.addEventListener("mousemove",x),document.addEventListener("mouseup",C),function(){n.removeEventListener("mousedown",E),document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",C)}})),Object(r.useEffect)((function(){var n=t.getBoundingClientRect();p({x:e.editor.selectedObject.position.x,y:e.editor.selectedObject.position.y+n.top,width:e.editor.selectedObject.w,height:e.editor.selectedObject.h})}),[]),Object(r.useLayoutEffect)((function(){var e=t.getBoundingClientRect(),n=v.current;n.style.top=e.top+"px",n.style.left=e.width+"px"})),a.a.createElement("div",null,a.a.createElement("div",{className:"shapeBar",ref:v},a.a.createElement("div",null,a.a.createElement("label",{className:"shapebar__borderLabel"},"\u0413\u0440\u0430\u043d\u0438\u0446\u0430"),a.a.createElement("input",{className:"shapebar__input",type:"color",onChange:function(t){console.log("dispatch ShapeObject setFigureBorderColor"),O(e.editor),e.onSetFigureBorderColor({newColor:t.target.value})}})),a.a.createElement("div",null,a.a.createElement("label",{className:"shapebar__fillLabel"},"\u0424\u043e\u043d"),a.a.createElement("input",{type:"color",onChange:function(t){console.log("dispatch ShapeObject setFigureBackgroundColor"),O(e.editor),e.onSetFigureBackgroundColor({newColor:t.target.value})},className:"shapebar__input"})),a.a.createElement("div",{className:"shapeBar__buttons"},a.a.createElement("button",{className:"applyBtn",onClick:function(n){var o=t.getContext("2d"),r=t.getBoundingClientRect();if(F(e.editor.selectedObject)){ge(e.figure,o,g,e.editor.selectedObject.borderColor,e.editor.selectedObject.backgroundColor,{x:g.x+1,y:g.y-r.top+2});var a=o.getImageData(0,0,t.width,t.height);console.log("dispatch ShapeObject addImage"),O(e.editor),e.onAddImage({newImage:a}),e.onDeselectArea()}e.onSetIntention(w.SelectArea)},title:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"}),a.a.createElement("button",{className:"abolishBtn",onClick:function(){O(e.editor),e.onDeselectArea(),e.onSetIntention(w.SelectArea)},title:"\u041e\u0442\u043c\u0435\u043d\u0430"}))),a.a.createElement("canvas",{className:"shapeObjcanvasSel",ref:y,style:{top:"".concat(g.y,"px"),left:"".concat(g.x,"px"),width:"".concat(g.width,"px"),height:"".concat(g.height,"px")}}),a.a.createElement(de,{pos:g,changeSize:j,type:ue.LeftTop,showNewFigure:e.showNewFigure}),a.a.createElement(de,{pos:g,changeSize:j,type:ue.RightTop,showNewFigure:e.showNewFigure}),a.a.createElement(de,{pos:g,changeSize:j,type:ue.LeftBottom,showNewFigure:e.showNewFigure}),a.a.createElement(de,{pos:g,changeSize:j,type:ue.RightBottom,showNewFigure:e.showNewFigure}))}));n(31);var ve=Object(b.b)((function(e){return{editor:e.editorReducer.editor}}))((function(e){var t=Object(r.useRef)(null);return Object(r.useEffect)((function(){t.current.getContext("2d").putImageData(e.editor.canvas,0,0,0,0,e.editor.canvas.width,e.editor.canvas.height),e.setCanv(t)})),a.a.createElement("div",null,a.a.createElement("canvas",{ref:t,width:e.editor.canvas.width,height:e.editor.canvas.height,className:"canvas"}))}));n(32);function Oe(e,t,n){var o=Math.min(e.x,t.x,n.width),r=Math.max(n.y,Math.min(n.y+n.height,t.y,e.y)),a=Math.min(Math.max(t.x,e.x),n.width),c=Math.min(r+Math.abs(t.y-e.y),n.y+n.height);return{startX:o,startY:r,endX:a,endY:c,width:a-o,height:c-r}}var ye=Object(b.b)((function(e){return{editor:e.editorReducer.editor}}),(function(e){return{onSelectArea:function(t){return e(function(e){return{type:"SELECT_AREA",payload:e}}(t))},onWhitenArea:function(){return e({type:"WHITEN_AREA",payload:{}})},onJoinSelectionWithCanvas:function(){return e({type:"JOIN_SA_WITH_CANVAS",payload:{}})}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useState)({down:{x:0,y:0},isMousePressed:!1,current:{x:0,y:0}}),o=Object(l.a)(n,2),c=o[0],i=o[1];function u(t){var n=f.getBoundingClientRect();t.clientY<n.top||t.defaultPrevented||(console.log("SA in onMouseDownHandler function"),e.editor.selectedObject&&M(e.editor.selectedObject)&&(console.log("dispatch SelectedArea joinSelectionWithCanvas"),O(e.editor),e.onJoinSelectionWithCanvas()),console.log("SA SELECTING onMouseDownSVGHandler"),i(Object(S.a)(Object(S.a)({},c),{},{down:{x:t.clientX,y:t.clientY},isMousePressed:!0,current:{x:t.clientX,y:t.clientY}})))}var s=function(e){c.isMousePressed&&i(Object(S.a)(Object(S.a)({},c),{},{current:{x:e.clientX,y:e.clientY}}))},d=function(t){if(c.isMousePressed){if(console.log("SA SELECTING onMouseUpSVGHandler"),t.clientX!==c.down.x&&t.clientY!==c.down.y){var n=f.getBoundingClientRect(),o=Oe({x:c.down.x,y:c.down.y},{x:t.clientX,y:t.clientY},n),r=o.startX,a=o.startY,l=o.endX,u=o.endY;console.log("dispatch SelectingSA selectArea"),O(e.editor),e.onSelectArea({startPoint:{x:r,y:a-n.top},endPoint:{x:l,y:u-n.top}}),console.log("dispatch SelectingSA whitenArea"),e.onWhitenArea()}i(Object(S.a)(Object(S.a)({},c),{},{isMousePressed:!1}))}},f=Object(r.useContext)(Ce);return Object(r.useEffect)((function(){if(f){var e=f.getBoundingClientRect();document.addEventListener("mousedown",u),document.addEventListener("mousemove",s),document.addEventListener("mouseup",d);var n=Oe({x:c.down.x,y:c.down.y},{x:c.current.x,y:c.current.y},e),o=t.current;return o.style.display=c.isMousePressed?"block":"none",o.style.top=n.startY.toString(),o.style.left=n.startX.toString(),o.setAttribute("width",n.width.toString()),o.setAttribute("height",n.height.toString()),function(){document.removeEventListener("mousedown",u),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",d)}}})),a.a.createElement("svg",{ref:t,className:"selection"})}));var je=Object(b.b)((function(e){return{editor:e.editorReducer.editor}}),(function(e){return{onDeselectArea:function(){return e({type:"DESELECT_AREA",payload:{}})},onSelectTextArea:function(t){return e(function(e){return{type:"SELECT_TEXT_AREA",payload:e}}(t))},onJoinSelectionWithCanvas:function(){return e({type:"JOIN_SA_WITH_CANVAS",payload:{}})}}}))((function(e){var t=Object(r.useContext)(Ce),n=Object(r.useRef)(null),o=Object(r.useState)({down:{x:0,y:0},isMousePressed:!1,current:{x:0,y:0}}),c=Object(l.a)(o,2),i=c[0],u=c[1];function s(n){if(!e.editor.selectedObject){var o=t.getBoundingClientRect();n.clientY<o.top||u(Object(S.a)(Object(S.a)({},i),{},{down:{x:n.clientX,y:n.clientY},isMousePressed:!0,current:{x:n.clientX,y:n.clientY}}))}}var d=function(e){i.isMousePressed&&u(Object(S.a)(Object(S.a)({},i),{},{current:{x:e.clientX,y:e.clientY}}))},f=function(n){if(i.isMousePressed){if(console.log("TEXT SELECTING onMouseUpSVGHandler"),n.clientX!==i.down.x&&n.clientY!==i.down.y){var o=t.getBoundingClientRect(),r=Oe({x:i.down.x,y:i.down.y},{x:n.clientX,y:n.clientY},o),a=r.startX+2,c=r.startY+2,l=r.endX+2,s=r.endY+2;console.log("dispatch SelectingTextObject selectTextArea"),O(e.editor),e.onSelectTextArea({startPoint:{x:a,y:c-o.top},endPoint:{x:l,y:s-o.top}})}u(Object(S.a)(Object(S.a)({},i),{},{isMousePressed:!1})),e.onSetIntention(w.HandleSelectedObject)}};return Object(r.useEffect)((function(){e.editor.selectedObject&&M(e.editor.selectedObject)&&(console.log("dispatch SelectingTextObject joinSelectionWithCanvas"),O(e.editor),e.onJoinSelectionWithCanvas())}),[]),Object(r.useEffect)((function(){if(t){var e=t.getBoundingClientRect();document.addEventListener("mousedown",s),document.addEventListener("mousemove",d),document.addEventListener("mouseup",f);var o=Oe({x:i.down.x,y:i.down.y},{x:i.current.x,y:i.current.y},e),r=n.current;return r.style.display=i.isMousePressed?"block":"none",r.style.top=o.startY.toString(),r.style.left=o.startX.toString(),r.setAttribute("width",o.width.toString()),r.setAttribute("height",o.height.toString()),function(){document.removeEventListener("mousedown",s),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",f)}}})),a.a.createElement("svg",{ref:n,className:"textSelection"})})),Ee=n(15);n(13);var we=Object(b.b)((function(e){return{editor:e.editorReducer.editor}}),(function(e){return{onAddImage:function(t){return e(d(t))}}}))((function(e){var t=Object(r.useContext)(Ce);return a.a.createElement("div",{className:"pickImgContainer__preview",onClick:function(){console.log("props.mediumSrc",e.mediumSrc);var n=new Image;n.src=e.mediumSrc,n.crossOrigin="Anonymous";var o=t.getContext("2d");n.onload=function(){var r=n.width,a=n.height;r>e.editor.canvas.width||a>e.editor.canvas.height?window.confirm("\u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c\u0430\u044f \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f \u0431\u043e\u043b\u044c\u0448\u0435 \u043f\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0443 \u0445\u043e\u043b\u0441\u0442\u0430. \u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u043f\u043e\u043b\u043e\u0442\u043d\u043e \u0434\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438?")&&(t.width=r,t.height=a,o.drawImage(n,0,0)):o.drawImage(n,0,0);var c=o.getImageData(0,0,t.width,t.height);console.log("dispatch PreviewImg addImage"),O(e.editor),e.onAddImage({newImage:c})}}},a.a.createElement("img",{src:e.photo.src.tiny,width:"280",height:"200"}))})),xe=Object(Ee.a)("563492ad6f91700001000001f32c0c635f2c46e4badcbd278b68e104");var Se=function(e){var t;!function(e){e[e.jpeg=0]="jpeg",e[e.png=1]="png"}(t||(t={})),t.jpeg;var n,o=Object(r.useState)(""),c=Object(l.a)(o,2),i=c[0],u=c[1],s=Object(r.useState)(1),d=Object(l.a)(s,2),f=d[0],h=d[1],b=Object(r.useState)([]),m=Object(l.a)(b,2),g=m[0],p=m[1],v=function(){""!=i&&xe.photos.search({query:i,per_page:4,page:f}).then((function(e){!function(e){"error"in e||(n=e.photos.map((function(e,t){return a.a.createElement(we,{key:t,photo:e,mediumSrc:e.src.medium})}))),p(n)}(e)}))};return Object(r.useEffect)((function(){v()}),[f]),a.a.createElement("div",{className:"pickImgContainer"},a.a.createElement("input",{placeholder:"\u041f\u043e\u0438\u0441\u043a",onChange:function(e){u(e.target.value),h(1)}}),a.a.createElement("button",{onClick:v,className:"pickImgContainer__searchButton"},"\u041d\u0430\u0439\u0442\u0438"),a.a.createElement("div",{onClick:function(t){return e.onSetIntention(w.SelectArea)},className:"pickImgContainer__closeButton"}),a.a.createElement("div",{className:"pickImgContainer__previewsContainer"},g),a.a.createElement("button",{onClick:function(){h(f+1)},className:"pickImgContainer__morePreviewsButton"},"\u0415\u0449\u0435"))},Ce=a.a.createContext(null);var Re=Object(b.b)((function(e){return{editor:e.editorReducer.editor}}),(function(e){return{onDeselectArea:function(){return e({type:"DESELECT_AREA",payload:{}})},onAddFigure:function(t){return e(s(t))}}}))((function(e){var t=Object(r.useState)(o.circle),n=Object(l.a)(t,2),c=n[0],i=n[1],u=Object(r.useState)(!1),s=Object(l.a)(u,2),d=s[0],f=s[1],h=Object(r.useState)(w.SelectArea),b=Object(l.a)(h,2),m=b[0],g=b[1],p=Object(r.useState)(null),v=Object(l.a)(p,2),O=v[0],y=v[1],j=function(e){g(e)};return a.a.createElement(Ce.Provider,{value:O},a.a.createElement("div",null,m!=w.TakePhoto&&a.a.createElement(te,{onSetFigure:function(e){i(e)},onSetIntention:j}),e.editor.selectedObject&&M(e.editor.selectedObject)&&a.a.createElement(oe,null),e.editor.selectedObject&&P(e.editor.selectedObject)&&a.a.createElement(be,{onSetIntention:j}),e.editor.selectedObject&&F(e.editor.selectedObject)&&a.a.createElement(pe,{figure:c,showNewFigure:d,onShowNewFigure:function(e){f(e)},onSetIntention:j}),m==w.TakePhoto?a.a.createElement(ne,{onSetIntention:j}):a.a.createElement(ve,{setCanv:function(e){return y(e.current)}}),m==w.SelectArea&&a.a.createElement(ye,null),m==w.SelectTextObj&&a.a.createElement(je,{onSetIntention:j}),m==w.BrowseRemoteGallery&&a.a.createElement(Se,{onSetIntention:j})))}));var Ae=Object(b.b)(null,(function(e){return{onRoll:function(t){return e(h(t))}}}))((function(e){var t=function(t){if(t.ctrlKey&&(90==t.which||90==t.keyCode)&&m.length){var n=p();e.onRoll({newEditor:n})}if(t.ctrlKey&&(89==t.which||89==t.keyCode)&&g.length){var o=v();e.onRoll({newEditor:o})}};return Object(r.useEffect)((function(){return document.addEventListener("keydown",(function(e){return t(e)})),function(){document.removeEventListener("keydown",t)}})),a.a.createElement("div",{className:"App"},a.a.createElement(Re,null))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Te=n(4),Be={canvas:C(800,600),selectedObject:null},_e={editor:Object(S.a)({},Be)};var Ie=Object(Te.c)({editorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_AREA":return{editor:N(e.editor,t.payload)};case"WHITEN_AREA":return{editor:V(e.editor,t.payload)};case"JOIN_SA_WITH_CANVAS":return{editor:B(e.editor,t.payload)};case"DROP_SA":return{editor:X(e.editor,t.payload)};case"DESELECT_AREA":return{editor:D(e.editor,t.payload)};case"ADD_FIGURE":return{editor:$(e.editor,t.payload)};case"APPLY_FILTER":return{editor:Z(e.editor,t.payload)};case"CUT":return{editor:J(e.editor,t.payload)};case"CROP":return{editor:K(e.editor,t.payload)};case"CREATE_CANVAS":return{editor:R(e.editor,t.payload)};case"ADD_IMAGE":return{editor:_(e.editor,t.payload)};case"RESIZE_EDITOR_OBJ":return{editor:A(e.editor,t.payload)};case"DROP_TEXT_OBJ":return{editor:Y(e.editor,t.payload)};case"SELECT_TEXT_AREA":return{editor:k(e.editor,t.payload)};case"SET_FIGURE_BACKGROUND_COLOR":return{editor:Q(e.editor,t.payload)};case"SET_FIGURE_BORDER_COLOR":return{editor:ee(e.editor,t.payload)};case"ROLL":return{editor:L(e.editor,t.payload)};default:return e}return e}});var Ne=Object(Te.d)(Ie,Object(Te.a)((function(e){return function(e){return function(t){return e(t)}}}))),Le=a.a.createElement(b.a,{store:Ne},a.a.createElement(a.a.StrictMode,null,a.a.createElement(Ae,null)));i.a.render(Le,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[16,1,2]]]);
//# sourceMappingURL=main.f8a9eb5f.chunk.js.map